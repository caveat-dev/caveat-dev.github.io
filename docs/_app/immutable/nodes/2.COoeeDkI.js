import{s as Y,n as K,r as $,o as ee,e as U}from"../chunks/scheduler.CtbWrGNo.js";import{S as te,i as ne,e as H,s as R,c as _,f as I,z as V,a as F,d as b,p as f,q as j,g as k,h as A,A as Z,B as G}from"../chunks/index.DX2qvOTm.js";let x=new Map([["COLORS",new Map([["text","#cdd6f4"],["error","#f38ba8"],["warning","#f9e2af"],["success","#a6e3a1"],["heading","#cba6f7"],["link","#89b4fa"],["command","#f5e0dc"]])]]);function Q(e){let r=x.get(e);if(!r)return"";let t="";return r.forEach((n,i)=>{e==="COLORS"?t+=`${i}: {${n}}
`:t+=`${i}: ${n}
`}),t.substring(0,t.length-1)}function T(e){let r=x.get("COLORS"),t=new RegExp(String.raw`(?<!\\)[a-zA-Z0-9 ]*(?<!https|http):`,"g");return Array.from(e.matchAll(t),n=>{e=e.replaceAll(n[0],`<span style='color: ${r.get("heading")}'>${n[0].substring(0,n[0].length)}</span>`)}),g.forEach(n=>{let i=new RegExp(String.raw`\[${n.aliases}\]`,"g");e=e.replaceAll(i,`<span style='color: ${r.get("command")}'>${re(n)}</span>`)}),t=new RegExp(String.raw`(https)://\S*`,"g"),Array.from(e.matchAll(t),n=>{e=e.replaceAll(n[0],`<span style='color: ${r.get("link")}'>${n[0]}</span>`)}),t=new RegExp(String.raw`\{#[a-fA-F0-9]{6}\}`,"g"),Array.from(e.matchAll(t),n=>{let i=n[0].substring(1,n[0].length-1);e=e.replaceAll(n[0],`<span style='color: ${i}'>${i}</span>`)}),e=e.replaceAll(/\n|\\n/g,"<br>"),e=e+"<br>",`<span style="word-break: normal; hyphens: auto">${e}</span>`}function re(e){return`[${e.aliases.toString().replaceAll(",",", ")}]`}const q="&lt;",W="&gt;";function se(e,r,t,n){return{aliases:e,description:r,usage:t,callback:n}}function M(e,r,t,n){return[e[0],se(e,r,t,n)]}const g=new Map([M(["welcome"],"Prints the welcome message.","welcome",e=>{if(e.length!==0)return L(g.get("welcome"));let r=`Welcome to CAVM 1.0.0.
Type [${g.get("help").aliases}] for a list of commands.`;return{result:!0,text:T(r),historyChanged:!1,newHistory:null}}),M(["help","h"],"Prints available commands.",`help, help ${q}#page${W}`,e=>{let r=1;if(e.length>1)return L(g.get("help"));if(e.length!=0){if(r=Number.parseInt(e[0]),isNaN(r))return L(g.get("help"));r=Math.max(1,r),r=Math.min(Math.ceil(g.size/3),r)}let t=r*3-3,n=Math.min(t+2,g.size-1),i="",o=Array.from(g);for(let s=t;s<=n;s++)i+=`[${o[s][1].aliases}]
Description: ${o[s][1].description}
Usage: ${o[s][1].usage}
`;return i+=`Page ${r}/${Math.ceil(g.size/3)}`,{result:!0,text:T(i),historyChanged:!1,newHistory:null}}),M(["clear","cls"],"Clears the screen.","cls",e=>e.length!==0?L(g.get("clear")):{result:!0,text:null,historyChanged:!0,newHistory:""}),M(["accounts"],"Prints Caveat's git pages, socials, and other accounts online.","accounts",e=>e.length!==0?L(g.get("accounts")):{result:!0,text:T(`Email: cv@caveat.cc
Discord: caveat__
Git Accounts:
https://codeberg.org/caveat (preferred)
https://github.com/caveat-dev`),historyChanged:!1,newHistory:null}),M(["bio"],"Prints Caveat's bio.","bio",e=>e.length!==0?L(g.get("bio")):{result:!0,text:T(`Caveat (often stylized as caveat, full name Caveat Emptor) is an amateur developer and FOSS enthusiast from North America.
They enjoy developing programs in Rust and Haskell, but begrudgingly use Javascript the most.
Watch them develop open-source software that nobody uses!`),historyChanged:!1,newHistory:null}),M(["echo"],"Prints the given text and/or environment variables.",`echo ${q}text${W}`,e=>{let r="";return e.forEach(t=>{t.startsWith("$")?(r=r.substring(0,r.length-1),r+=`${Q(t.substring(1,t.length))} `):r+=`${t} `}),{result:!0,text:T(r),historyChanged:!1,newHistory:null}}),M(["print-env","printenv"],"Prints the names of the current environment variables.","print-env",e=>{if(e.length!==0)return L(g.get("print-env"));let r=Array.from(x),t="";return r.forEach(n=>{t+=`${n[0]}, `}),t=t.substring(0,t.length-2),{result:!0,text:T(t),historyChanged:!1,newHistory:null}}),M(["print-var","printvar"],`Prints the values of the given environment variable. Functionally identical to '$ECHO ${q}var${W}'`,`print-var ${q}var${W}`,e=>e.length!==1?L(g.get("print-var")):(e[0]=e[0].replace("$",""),x.get(e[0])?{result:!0,text:T(Q(e[0])),historyChanged:!1,newHistory:null}:{result:!1,text:`<span style='color: ${x.get("COLORS").get("error")}'>Error:</span> Unknown environment variable '${e[0]}'.
`,historyChanged:!1,newHistory:null}))]);function X(e,r,t){let n=e.replace("\\n"," <br> ").split(" "),i={result:!1,text:`<span style="color: ${x.get("COLORS").get("error")}">Error:</span> command not found: '${n[0]}'
`,historyChanged:!1,newHistory:null};return g.forEach(o=>{if(o.aliases.includes(n[0])){i=o.callback(n.slice(1,n.length),r,t);return}}),i}function L(e){return{result:!1,text:`<span style="color: ${x.get("COLORS").get("error")}">Error:</span> invalid args provided.
<span style="color: ${x.get("COLORS").get("heading1")}">Usage:</span> <span style="color: ${x.get("COLORS").get("command")}">[${e.usage.toString().replaceAll(",",", ")}]</span>
`,historyChanged:!1,newHistory:null}}function le(e){let r,t,n,i="github.com",o,s,u="cv@caveat.cc",v,p,c,m,C,P,y,d,E=">",S,w,B='<span class="terminal-cursor">▌</span>',D,N;return{c(){r=H("link"),t=R(),n=H("a"),n.textContent=i,o=R(),s=H("a"),s.textContent=u,v=R(),p=H("div"),c=H("input"),m=R(),C=H("p"),P=R(),y=H("div"),d=H("p"),d.textContent=E,S=R(),w=H("p"),w.innerHTML=B,this.h()},l(a){r=_(a,"LINK",{href:!0,rel:!0,style:!0}),t=I(a),n=_(a,"A",{href:!0,rel:!0,target:!0,style:!0,"data-svelte-h":!0}),V(n)!=="svelte-ewq668"&&(n.textContent=i),o=I(a),s=_(a,"A",{href:!0,rel:!0,target:!0,style:!0,"data-svelte-h":!0}),V(s)!=="svelte-17wtamf"&&(s.textContent=u),v=I(a),p=_(a,"DIV",{class:!0});var h=F(p);c=_(h,"INPUT",{class:!0,id:!0,type:!0}),m=I(h),C=_(h,"P",{class:!0}),F(C).forEach(b),P=I(h),y=_(h,"DIV",{class:!0});var O=F(y);d=_(O,"P",{class:!0,"data-svelte-h":!0}),V(d)!=="svelte-10h5qpw"&&(d.textContent=E),S=I(O),w=_(O,"P",{class:!0,"data-svelte-h":!0}),V(w)!=="svelte-53k1fx"&&(w.innerHTML=B),O.forEach(b),h.forEach(b),this.h()},h(){f(r,"href","https://indieauth.com/auth"),f(r,"rel","authorization_endpoint"),j(r,"visibility","hidden"),f(n,"href","https://github.com/caveat-dev"),f(n,"rel","me"),f(n,"target","_blank"),j(n,"visibility","hidden"),f(s,"href","mailto:cv@caveat.cc"),f(s,"rel","me"),f(s,"target","_blank"),j(s,"visibility","hidden"),f(c,"class","terminal-input"),f(c,"id","terminal-input"),f(c,"type","text"),f(C,"class","terminal-history"),f(d,"class","terminal-prompt"),f(w,"class","terminal-fake-input"),f(y,"class","terminal-fake-input-container"),f(p,"class","terminal-container")},m(a,h){k(a,r,h),k(a,t,h),k(a,n,h),k(a,o,h),k(a,s,h),k(a,v,h),k(a,p,h),A(p,c),e[11](c),Z(c,e[4]),A(p,m),A(p,C),e[15](C),A(p,P),A(p,y),A(y,d),A(y,S),A(y,w),e[16](w),e[17](p),D||(N=[G(c,"input",e[12]),G(c,"keydown",e[13]),G(c,"keyup",e[14])],D=!0)},p(a,[h]){h&16&&c.value!==a[4]&&Z(c,a[4])},i:K,o:K,d(a){a&&(b(r),b(t),b(n),b(o),b(s),b(v),b(p)),e[11](null),e[15](null),e[16](null),e[17](null),D=!1,$(N)}}}function ie(e,r,t){let n,i,o,s,u="",v=!1,p=!0,c=[],m=0;ee(()=>{i.focus(),C(),window.addEventListener("resize",C),setInterval(()=>{v?t(6,p=!0):t(6,p=!p)},1e3),setInterval(()=>{E(u,p)},1),y(X("welcome",u,s.innerHTML).text||"")});function C(){if(!n)return;let l=Math.min(window.innerHeight,window.innerWidth)*.95;t(0,n.style.width=l+"px",n),t(0,n.style.height=l+"px",n),P()}function P(){if(!n||!s)return;let l=0;for(;s.clientHeight+30>=n.clientHeight&&l<1e3;){const z=s.innerHTML.indexOf("<br>"),J=s.innerHTML;t(3,s.innerHTML=J.substring(z+4,J.length),s),l++}}function y(l){s&&(t(3,s.innerHTML+=l,s),P())}function d(l,z=!0){t(3,s.innerHTML+='<span class="terminal-prompt-history">></span> ',s),z?t(3,s.innerHTML+=`<span class="terminal-history-command-success"">${l}</span>`,s):t(3,s.innerHTML+=`<span class="terminal-history-command-failure"">${l}</span>`,s),t(3,s.innerHTML+="<br>",s)}function E(l,z){o&&(t(2,o.innerHTML=l,o),z&&t(2,o.innerHTML+='<span class="terminal-cursor">▌</span>',o))}function S(){if(u.trim()===""){d("");return}let l=X(u,u,s.innerHTML);d(u,l.result),y(l.text||""),l.result&&l.historyChanged&&t(3,s.innerHTML=l.newHistory||"",s),c.push(u),t(7,m=c.length),t(4,u="")}function w(l){U[l?"unshift":"push"](()=>{i=l,t(1,i)})}function B(){u=this.value,t(4,u)}const D=l=>{console.log(l),(l.key==="ArrowLeft"||l.key==="ArrowRight")&&l.preventDefault(),t(5,v=!0)},N=l=>{l&&(l.key==="Enter"?(E("",p),S()):l.key==="Delete"?t(4,u=u.substring(0,u.length-1)):l.key==="ArrowUp"?(m>0&&t(7,m-=1),t(4,u=c[m]||"")):l.key==="ArrowDown"?(m<=c.length-1&&t(7,m+=1),t(4,u=c[m]||"")):t(4,u+=i.innerText),t(5,v=!1))};function a(l){U[l?"unshift":"push"](()=>{s=l,t(3,s)})}function h(l){U[l?"unshift":"push"](()=>{o=l,t(2,o)})}function O(l){U[l?"unshift":"push"](()=>{n=l,t(0,n)})}return[n,i,o,s,u,v,p,m,c,E,S,w,B,D,N,a,h,O]}class ue extends te{constructor(r){super(),ne(this,r,ie,le,Y,{})}}export{ue as component};
