import{s as oe,n as Y,r as ae,o as ue,e as j}from"../chunks/scheduler.CtbWrGNo.js";import{S as ce,i as fe,e as H,s as O,t as $,c as x,f as P,z as G,a as K,d as m,b as ee,p as c,q as Z,g as E,h as A,A as te,B as X,j as he}from"../chunks/index.DX2qvOTm.js";let v=new Map([["COLORS",new Map([["text","#cdd6f4"],["error","#f38ba8"],["warning","#f9e2af"],["success","#a6e3a1"],["heading","#cba6f7"],["link","#89b4fa"],["command","#f5e0dc"]])]]);function ne(e){let r=v.get(e);if(!r)return"";let t="";return r.forEach((s,o)=>{e==="COLORS"?t+=`${o}: {${s}}
`:t+=`${o}: ${s}
`}),t.substring(0,t.length-1)}function T(e){let r=v.get("COLORS"),t=new RegExp(String.raw`(?<!\\)[a-zA-Z0-9 ]*(?<!https|http):`,"g");return Array.from(e.matchAll(t),s=>{e=e.replaceAll(s[0],`<span style='color: ${r.get("heading")}'>${s[0].substring(0,s[0].length)}</span>`)}),h.forEach(s=>{let o=new RegExp(String.raw`\[${s.aliases}\]`,"g");e=e.replaceAll(o,`<span style='color: ${r.get("command")}'>${ge(s)}</span>`)}),t=new RegExp(String.raw`(https)://\S*`,"g"),Array.from(e.matchAll(t),s=>{e=e.replaceAll(s[0],`<span style='color: ${r.get("link")}'>${s[0]}</span>`)}),t=new RegExp(String.raw`\{#[a-fA-F0-9]{6}\}`,"g"),Array.from(e.matchAll(t),s=>{let o=s[0].substring(1,s[0].length-1);e=e.replaceAll(s[0],`<span style='color: ${o}'>${o}</span>`)}),e=e.replaceAll(/\n|\\n/g,"<br>"),e=e+"<br>",`<span style="word-break: normal; hyphens: auto">${e}</span>`}function ge(e){return`[${e.aliases.toString().replaceAll(",",", ")}]`}function pe(){localStorage.clear(),localStorage.setItem("wd","/home/anon"),localStorage.setItem("fs",JSON.stringify({name:"/",contents:[{name:"home",contents:[{name:"anon",contents:[]}]},{name:"bin",contents:[]}]}))}function ie(){return JSON.parse(localStorage.getItem("fs"))}function F(){return localStorage.getItem("wd")}function re(e){let r=ie().contents,t=!0;e.startsWith("/")||(e=`${F()}/${e}`),e.endsWith("/")&&(e=e.substring(0,e.length-1));let s=e.split("/"),o=!0;for(;o;){o=!1;for(let i=0;i<s.length;i++)s[i]===".."&&(s.splice(i-1,2),o=!0)}if(s.length<=1&&(s=[]),console.log(s),s.forEach(i=>{if(i!==""){let l=!1;if(r.forEach(a=>{if(typeof a.contents!="string"&&a.name===i){r=a.contents,l=!0;return}}),!l){t=!1;return}}}),t){let i="";return r.forEach(l=>{i+=`${l.name}`,typeof l.contents!="string"&&(i+="*"),i+=" "}),i=i.trim()+`
`,i.trim()===""&&(i=""),i}else return e=e.replaceAll("//","/"),`<span style="color: ${v.get("COLORS").get("error")}">Error:</span> invalid path '${e}'
`}function V(e){localStorage.setItem("wd",e)}function se(e){if(e==="/")return V("/"),!0;if(e==="")return V("/home/anon"),!0;if(e.startsWith("/")){if(e=e.substring(1),e==="")return V("/"),!0}else e=`${F()}/${e}`,e.endsWith("/")&&(e=e.substring(0,e.length-1));let r="/";const t=e.split("/");let s=ie().contents,o=!0;for(;o;){o=!1;for(let l=0;l<t.length;l++)t[l]===".."&&(t.splice(l-1,2),o=!0)}if(t.length<=1)return V("/"),!0;let i=!1;return t.forEach(l=>{if(i=!1,s.forEach(a=>{if(typeof a.contents!="string"&&a.name===l){s=a.contents,r+=`${a.name}/`,i=!0;return}}),!i){i=!1;return}}),r=r.substring(0,r.length-1),i&&V(r),i}const W="&lt;",z="&gt;";function de(e,r,t,s){return{aliases:e,description:r,usage:t,callback:s}}function w(e,r,t,s){return[e[0],de(e,r,t,s)]}const h=new Map([w(["welcome"],"Prints the welcome message.","welcome",e=>{if(e.length!==0)return b(h.get("welcome"));const r=`Welcome to CAVM 1.0.0.
Type [${h.get("help").aliases}] for a list of commands.`;return{result:!0,text:T(r),historyChanged:!1,newHistory:null}}),w(["help","h"],"Prints available commands.",`help, help ${W}#page${z}`,e=>{let r=1;if(e.length>1)return b(h.get("help"));if(e.length!=0){if(r=Number.parseInt(e[0]),isNaN(r))return b(h.get("help"));r=Math.max(1,r),r=Math.min(Math.ceil(h.size/3),r)}const t=r*3-3,s=Math.min(t+2,h.size-1);let o="";const i=Array.from(h);for(let l=t;l<=s;l++)o+=`[${i[l][1].aliases}]
Description: ${i[l][1].description}
Usage: ${i[l][1].usage}
`;return o+=`Page ${r}/${Math.ceil(h.size/3)}`,{result:!0,text:T(o),historyChanged:!1,newHistory:null}}),w(["clear","cls"],"Clears the screen.","cls",e=>e.length!==0?b(h.get("clear")):{result:!0,text:null,historyChanged:!0,newHistory:""}),w(["accounts"],"Prints Caveat's git pages, socials, and other accounts online.","accounts",e=>e.length!==0?b(h.get("accounts")):{result:!0,text:T(`Email: cv@caveat.cc
Discord: caveat__
Git Accounts:
https://codeberg.org/caveat (preferred)
https://github.com/caveat-dev`),historyChanged:!1,newHistory:null}),w(["bio"],"Prints Caveat's bio.","bio",e=>e.length!==0?b(h.get("bio")):{result:!0,text:T(`Caveat (often stylized as caveat, full name Caveat Emptor) is an amateur developer and FOSS enthusiast from North America.
They enjoy developing programs in Rust and Haskell, but begrudgingly use Javascript the most.
Watch them develop open-source software that nobody uses!`),historyChanged:!1,newHistory:null}),w(["echo"],"Prints the given text and/or environment variables.",`echo ${W}text${z}`,e=>{let r="";return e.forEach(t=>{t.startsWith("$")?(r=r.substring(0,r.length-1),r+=`${ne(t.substring(1,t.length))} `):r+=`${t} `}),{result:!0,text:T(r),historyChanged:!1,newHistory:null}}),w(["print-env","printenv"],"Prints the names of the current environment variables.","print-env",e=>{if(e.length!==0)return b(h.get("print-env"));const r=Array.from(v);let t="";return r.forEach(s=>{t+=`${s[0]}, `}),t=t.substring(0,t.length-2),{result:!0,text:T(t),historyChanged:!1,newHistory:null}}),w(["print-var","printvar"],`Prints the values of the given environment variable. Functionally identical to '$ECHO ${W}var${z}'`,`print-var ${W}var${z}`,e=>e.length!==1?b(h.get("print-var")):(e[0]=e[0].replace("$",""),v.get(e[0])?{result:!0,text:T(ne(e[0])),historyChanged:!1,newHistory:null}:{result:!1,text:`<span style='color: ${v.get("COLORS").get("error")}'>Error:</span> Unknown environment variable '${e[0]}'.
`,historyChanged:!1,newHistory:null})),w(["ls"],"Lists the given or current directory.",`ls ${W}path${z}`,e=>{let r="";if(e.length===0)r+=re("");else if(e.length===1)r+=re(e[0]);else return b(h.get("ls"));return{result:!0,text:r,historyChanged:!1,newHistory:null}}),w(["cd"],"Changes the working directory.",`cd ${W}path${z}`,e=>{let r;if(e.length===0)r=se("");else{if(e.length!==1)return b(h.get("cd"));r=se(e[0])}let t="";return r||(t=`<span style="color: ${v.get("COLORS").get("error")}">Error:</span> invalid path '${e[0]}'
`),{result:r,text:t,historyChanged:!1,newHistory:null}}),w(["pwd"],"Prints the working directory.","pwd",e=>e.length!==0?b(h.get("pwd")):{result:!0,text:`${F()}
`,historyChanged:!1,newHistory:null})]);function le(e,r,t){const s=e.replace("\\n"," <br> ").trim().split(" ");let o={result:!1,text:`<span style="color: ${v.get("COLORS").get("error")}">Error:</span> command not found: '${s[0]}'
`,historyChanged:!1,newHistory:null};return h.forEach(i=>{if(i.aliases.includes(s[0])){o=i.callback(s.slice(1,s.length),r,t);return}}),o}function b(e){return{result:!1,text:`<span style="color: ${v.get("COLORS").get("error")}">Error:</span> invalid args provided.
<span style="color: ${v.get("COLORS").get("heading1")}">Usage:</span> <span style="color: ${v.get("COLORS").get("command")}">[${e.usage.toString().replaceAll(",",", ")}]</span>
`,historyChanged:!1,newHistory:null}}function me(e){let r,t,s,o="github.com",i,l,a="cv@caveat.cc",S,f,L="caveat__",d,g,p,I,k,R,y,C,D,N,B,_,q='<span class="terminal-cursor">▌</span>',U,J;return{c(){r=H("link"),t=O(),s=H("a"),s.textContent=o,i=O(),l=H("a"),l.textContent=a,S=O(),f=H("a"),f.textContent=L,d=O(),g=H("div"),p=H("input"),I=O(),k=H("p"),R=O(),y=H("div"),C=H("p"),D=$(e[8]),N=$(" ~>"),B=O(),_=H("p"),_.innerHTML=q,this.h()},l(n){r=x(n,"LINK",{href:!0,rel:!0,style:!0}),t=P(n),s=x(n,"A",{href:!0,rel:!0,target:!0,style:!0,"data-svelte-h":!0}),G(s)!=="svelte-ewq668"&&(s.textContent=o),i=P(n),l=x(n,"A",{href:!0,rel:!0,target:!0,style:!0,"data-svelte-h":!0}),G(l)!=="svelte-17wtamf"&&(l.textContent=a),S=P(n),f=x(n,"A",{href:!0,rel:!0,target:!0,style:!0,"data-svelte-h":!0}),G(f)!=="svelte-10ywcg4"&&(f.textContent=L),d=P(n),g=x(n,"DIV",{class:!0});var u=K(g);p=x(u,"INPUT",{class:!0,id:!0,type:!0}),I=P(u),k=x(u,"P",{class:!0}),K(k).forEach(m),R=P(u),y=x(u,"DIV",{class:!0});var M=K(y);C=x(M,"P",{class:!0});var Q=K(C);D=ee(Q,e[8]),N=ee(Q," ~>"),Q.forEach(m),B=P(M),_=x(M,"P",{class:!0,"data-svelte-h":!0}),G(_)!=="svelte-53k1fx"&&(_.innerHTML=q),M.forEach(m),u.forEach(m),this.h()},h(){c(r,"href","https://indieauth.com/auth"),c(r,"rel","authorization_endpoint"),Z(r,"visibility","hidden"),c(s,"href","https://github.com/caveat-dev"),c(s,"rel","me"),c(s,"target","_blank"),Z(s,"visibility","hidden"),c(l,"href","mailto:cv@caveat.cc"),c(l,"rel","me"),c(l,"target","_blank"),Z(l,"visibility","hidden"),c(f,"href","https://discord.com/users/824400229645418497"),c(f,"rel","me"),c(f,"target","_blank"),Z(f,"visibility","hidden"),c(p,"class","terminal-input"),c(p,"id","terminal-input"),c(p,"type","text"),c(k,"class","terminal-history"),c(C,"class","terminal-prompt"),c(_,"class","terminal-fake-input"),c(y,"class","terminal-fake-input-container"),c(g,"class","terminal-container")},m(n,u){E(n,r,u),E(n,t,u),E(n,s,u),E(n,i,u),E(n,l,u),E(n,S,u),E(n,f,u),E(n,d,u),E(n,g,u),A(g,p),e[12](p),te(p,e[4]),A(g,I),A(g,k),e[16](k),A(g,R),A(g,y),A(y,C),A(C,D),A(C,N),A(y,B),A(y,_),e[17](_),e[18](g),U||(J=[X(p,"input",e[13]),X(p,"keydown",e[14]),X(p,"keyup",e[15])],U=!0)},p(n,[u]){u&16&&p.value!==n[4]&&te(p,n[4]),u&256&&he(D,n[8])},i:Y,o:Y,d(n){n&&(m(r),m(t),m(s),m(i),m(l),m(S),m(f),m(d),m(g)),e[12](null),e[16](null),e[17](null),e[18](null),U=!1,ae(J)}}}function ye(e,r,t){let s,o,i,l,a="",S=!1,f=!0,L=[],d=0,g="/";ue(()=>{o.focus(),p(),window.addEventListener("resize",p),setInterval(()=>{S?t(6,f=!0):t(6,f=!f)},1e3),setInterval(()=>{y(a,f)},1),k(le("welcome",a,l.innerHTML).text||""),pe(),t(8,g=F())});function p(){if(!s)return;let n=Math.min(window.innerHeight,window.innerWidth)*.95;t(0,s.style.width=n+"px",s),t(0,s.style.height=n+"px",s),I()}function I(){if(!s||!l)return;let n=0;for(;l.clientHeight+30>=s.clientHeight&&n<1e3;){const u=l.innerHTML.indexOf("<br>"),M=l.innerHTML;t(3,l.innerHTML=M.substring(u+4,M.length),l),n++}}function k(n){l&&(t(3,l.innerHTML+=n,l),I())}function R(n,u=!0){t(3,l.innerHTML+=`<span class="terminal-prompt-history">${g} ~> </span>`,l),u?t(3,l.innerHTML+=`<span class="terminal-history-command-success"">${n}</span>`,l):t(3,l.innerHTML+=`<span class="terminal-history-command-failure"">${n}</span>`,l),t(3,l.innerHTML+="<br>",l)}function y(n,u){i&&(t(2,i.innerHTML=n,i),u&&t(2,i.innerHTML+='<span class="terminal-cursor">▌</span>',i))}function C(){if(a.trim()===""){R("");return}let n=le(a,a,l.innerHTML);R(a,n.result),k(n.text||""),n.result&&n.historyChanged&&t(3,l.innerHTML=n.newHistory||"",l),L.push(a),t(7,d=L.length),t(4,a=""),t(8,g=F())}function D(n){j[n?"unshift":"push"](()=>{o=n,t(1,o)})}function N(){a=this.value,t(4,a)}const B=n=>{(n.key==="ArrowLeft"||n.key==="ArrowRight")&&n.preventDefault(),t(5,S=!0)},_=n=>{n&&(n.key==="Enter"?(y("",f),C()):n.key==="Delete"?t(4,a=a.substring(0,a.length-1)):n.key==="ArrowUp"?(d>0&&t(7,d-=1),t(4,a=L[d]||"")):n.key==="ArrowDown"?(d<=L.length-1&&t(7,d+=1),t(4,a=L[d]||"")):t(4,a+=o.innerText),t(5,S=!1))};function q(n){j[n?"unshift":"push"](()=>{l=n,t(3,l)})}function U(n){j[n?"unshift":"push"](()=>{i=n,t(2,i)})}function J(n){j[n?"unshift":"push"](()=>{s=n,t(0,s)})}return[s,o,i,l,a,S,f,d,g,L,y,C,D,N,B,_,q,U,J]}class ve extends ce{constructor(r){super(),fe(this,r,ye,me,oe,{})}}export{ve as component};
